---
// Astro component
const faqCategories = [
  { id: 'all', name: 'Todas las preguntas', active: true },
  { id: 'courses', name: 'Sobre los cursos', active: false },
  { id: 'payments', name: 'Pagos y garantías', active: false },
  { id: 'certification', name: 'Certificación', active: false },
  { id: 'referrals', name: 'Programa de referidos', active: false }
];

const faqItems = [
  {
    id: 1,
    category: 'courses',
    question: '¿Necesito experiencia previa en programación o IA?',
    answer: 'No necesitas experiencia previa. Nuestro programa está diseñado para principiantes y profesionales que quieren aprender IA aplicada desde cero. Te guiamos paso a paso.'
  },
  {
    id: 2,
    category: 'courses',
    question: '¿Las clases son en vivo o grabadas?',
    answer: 'Combinamos ambos formatos. Las clases principales son grabadas para que puedas verlas cuando quieras, pero también tenemos sesiones en vivo semanales para resolver dudas y hacer networking.'
  },
  {
    id: 3,
    category: 'courses',
    question: '¿Qué incluye la mentoría 1:1?',
    answer: 'La mentoría 1:1 incluye sesiones personalizadas con expertos en IA, revisión de tus proyectos, feedback detallado y plan de carrera personalizado. Son 4 sesiones de 1 hora cada una.'
  },
  {
    id: 4,
    category: 'certification',
    question: '¿El certificado tiene validez oficial?',
    answer: 'Nuestro certificado es verificable mediante blockchain y reconocido por empresas líderes en tecnología. Aunque no es un título universitario, tiene gran valor en el mercado laboral.'
  },
  {
    id: 5,
    category: 'payments',
    question: '¿Puedo pagar en cuotas?',
    answer: 'Sí, ofrecemos 3 cuotas sin interés con tarjetas participantes. También aceptamos transferencias bancarias y métodos de pago locales como Yape y Plin.'
  },
  {
    id: 6,
    category: 'payments',
    question: '¿Cómo funciona la garantía de 30 días?',
    answer: 'Si no estás satisfecho con el programa en los primeros 30 días, te devolvemos el 100% de tu dinero sin preguntas. Solo necesitas completar al menos el 20% del contenido.'
  },
  {
    id: 7,
    category: 'referrals',
    question: '¿Cómo funciona exactamente el programa de referidos?',
    answer: 'Por cada persona que refieras que se inscriba, recibes el 30% de comisión. El pago se realiza mensualmente y puedes ganar hasta $500 por referido exitoso.'
  },
  {
    id: 8,
    category: 'referrals',
    question: '¿Hay límite en las ganancias por referidos?',
    answer: 'No hay límite en las ganancias. Mientras más personas refieras, más puedes ganar. Algunos de nuestros estudiantes han ganado más de $5,000 mensuales solo con referidos.'
  },
  {
    id: 9,
    category: 'courses',
    question: '¿Qué pasa si me atraso en las clases en vivo?',
    answer: 'No te preocupes, todas las clases en vivo quedan grabadas y disponibles por 6 meses. Además, puedes acceder a las grabaciones de sesiones anteriores cuando quieras.'
  },
  {
    id: 10,
    category: 'courses',
    question: '¿Los proyectos son reales o solo ejercicios?',
    answer: 'Todos los proyectos son casos reales de empresas. Trabajarás con datos reales, problemas reales y soluciones que podrás implementar en tu trabajo o portafolio profesional.'
  }
];
---

<section id="faq" class="py-16 sm:py-20 lg:py-24 bg-gradient-to-br from-gray-900 via-black to-gray-800 relative overflow-hidden">
  
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <!-- Botón de FAQ -->
    <div class="text-center mb-8">
      <button class="inline-flex items-center space-x-2 border border-orange-500 text-orange-500 px-6 py-3 rounded-full text-sm font-medium bg-orange-500/10 hover:bg-orange-500 hover:text-white transition-all duration-300">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path>
        </svg>
        <span>Preguntas Frecuentes</span>
      </button>
    </div>

    <!-- Título principal -->
    <div class="text-center mb-12">
      <h2 class="text-white text-4xl lg:text-5xl font-bold mb-6">
        Resolvemos tus dudas más comunes
      </h2>
      <p class="text-gray-300 text-lg leading-relaxed max-w-3xl mx-auto">
        ¿No encuentras la respuesta que buscas? Contáctanos directamente y te respondemos en menos de 24 horas.
      </p>
    </div>

    <!-- Filtros de categorías -->
    <div class="flex flex-wrap justify-center gap-4 mb-12">
      {faqCategories.map((category) => (
        <button 
          class={`px-6 py-3 rounded-full text-sm font-medium transition-all duration-300 ${
            category.active 
              ? 'bg-blue-500 text-white' 
              : 'bg-gray-800 text-gray-300 hover:bg-gray-700'
          }`}
          onclick={`filterFAQ('${category.id}')`}
        >
          {category.name}
        </button>
      ))}
    </div>

    <!-- Lista de preguntas -->
    <div class="space-y-4 mb-16">
      {faqItems.map((item) => (
        <div class="faq-item bg-gray-800 rounded-xl p-6 group cursor-pointer hover:bg-gray-700 transition-all duration-300" onclick={`toggleFAQ(${item.id})`}>
          <div class="flex items-center justify-between">
            <h3 class="text-white text-lg font-medium pr-4">{item.question}</h3>
            <svg class="w-6 h-6 text-orange-500 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>
          <div class="faq-answer hidden mt-4">
            <p class="text-gray-300 leading-relaxed">{item.answer}</p>
          </div>
        </div>
      ))}
    </div>

    <!-- Sección de contacto -->
    <div class="bg-gradient-to-br from-gray-800 to-gray-700 rounded-xl p-8 text-center border border-gray-700">
      <h3 class="text-white text-2xl font-bold mb-4">¿Tienes otra pregunta?</h3>
      <p class="text-gray-300 text-lg mb-8">Nuestro equipo de soporte está disponible para ayudarte</p>
      
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
        <button class="bg-orange-500 hover:bg-orange-600 text-white px-8 py-4 rounded-full font-semibold transition-all duration-300 flex items-center space-x-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
          </svg>
          <span>Contactar soporte</span>
        </button>
        
        <div class="bg-gray-700 hover:bg-gray-600 text-white px-8 py-4 rounded-full font-semibold transition-all duration-300 cursor-pointer">
          hola@nutechacademy.com
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  function toggleFAQ(id) {
    const faqItem = document.querySelector(`[onclick="toggleFAQ(${id})"]`);
    const answer = faqItem.querySelector('.faq-answer');
    const arrow = faqItem.querySelector('svg');
    
    if (answer.classList.contains('hidden')) {
      answer.classList.remove('hidden');
      arrow.style.transform = 'rotate(180deg)';
    } else {
      answer.classList.add('hidden');
      arrow.style.transform = 'rotate(0deg)';
    }
  }

  function filterFAQ(category) {
    // Actualizar botones de filtro
    document.querySelectorAll('[onclick^="filterFAQ"]').forEach(btn => {
      btn.classList.remove('bg-blue-500', 'text-white');
      btn.classList.add('bg-gray-800', 'text-gray-300');
    });
    
    const activeBtn = document.querySelector(`[onclick="filterFAQ('${category}')"]`);
    activeBtn.classList.remove('bg-gray-800', 'text-gray-300');
    activeBtn.classList.add('bg-blue-500', 'text-white');
    
    // Filtrar preguntas
    const faqItems = document.querySelectorAll('.faq-item');
    faqItems.forEach(item => {
      if (category === 'all') {
        item.style.display = 'block';
      } else {
        // Aquí podrías agregar lógica para filtrar por categoría
        item.style.display = 'block';
      }
    });
  }

  // Hacer funciones globales
  window.toggleFAQ = toggleFAQ;
  window.filterFAQ = filterFAQ;
</script>
