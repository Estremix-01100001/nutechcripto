---
// Datos de FAQ integrados
const faqCategories = [
  { id: 'all', name: 'Todas las preguntas', active: true },
  { id: 'courses', name: 'Sobre los cursos', active: false },
  { id: 'payment', name: 'Pagos y garantías', active: false },
  { id: 'certification', name: 'Certificación', active: false },
  { id: 'referral', name: 'Programa de referidos', active: false }
];

const faqItems = [
  {
    id: 1,
    category: 'courses',
    question: '¿Qué cursos ofrecen en Nutech Academy?',
    answer: 'Ofrecemos cursos especializados en Inteligencia Artificial, Machine Learning, Data Science, Desarrollo Web, Ciberseguridad y Blockchain. Todos nuestros cursos están diseñados por expertos de la industria y se actualizan constantemente.'
  },
  {
    id: 2,
    category: 'courses',
    question: '¿Cuánto tiempo duran los cursos?',
    answer: 'La duración varía según el curso. Nuestros bootcamps intensivos duran entre 12-16 semanas, mientras que los cursos especializados van de 4-8 semanas. También ofrecemos cursos express de 2-4 semanas para temas específicos.'
  },
  {
    id: 3,
    category: 'payment',
    question: '¿Qué métodos de pago aceptan?',
    answer: 'Aceptamos tarjetas de crédito/débito (Visa, Mastercard, American Express), PayPal, transferencias bancarias y criptomonedas. También ofrecemos planes de financiamiento y descuentos por pago anticipado.'
  },
  {
    id: 4,
    category: 'payment',
    question: '¿Ofrecen garantía de devolución?',
    answer: 'Sí, ofrecemos una garantía de satisfacción del 100%. Si no estás completamente satisfecho con tu curso en los primeros 14 días, te reembolsamos el 100% de tu inversión sin preguntas.'
  },
  {
    id: 5,
    category: 'certification',
    question: '¿Recibo un certificado al completar el curso?',
    answer: 'Sí, al completar exitosamente cualquier curso recibirás un certificado digital verificable que puedes compartir en LinkedIn y agregar a tu CV. Nuestros certificados son reconocidos por la industria.'
  },
  {
    id: 6,
    category: 'certification',
    question: '¿Los certificados son reconocidos internacionalmente?',
    answer: 'Absolutamente. Nuestros certificados son reconocidos por empresas tecnológicas líderes a nivel mundial. Muchos de nuestros graduados han conseguido empleos en Google, Microsoft, Amazon y otras empresas Fortune 500.'
  },
  {
    id: 7,
    category: 'referral',
    question: '¿Cómo funciona el programa de referidos?',
    answer: 'Por cada amigo que refieras y que se inscriba en un curso, recibes $100 USD de crédito para tus próximos cursos. Tu amigo también recibe un 10% de descuento en su primera inscripción.'
  },
  {
    id: 8,
    category: 'referral',
    question: '¿Hay límite en las referencias?',
    answer: 'No hay límite. Puedes referir tantas personas como quieras y acumular créditos ilimitados. Los créditos no expiran y pueden ser transferidos a familiares o amigos.'
  }
];
---

<section id="faq" class="py-16 sm:py-20 lg:py-24 relative overflow-hidden" style="background: linear-gradient(90deg, #000000 0%, #0a0a0a 50%, #000000 100%);">
  
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-30">
    <!-- Botón de FAQ -->
    <div class="text-center mb-12">
      <button class="inline-flex items-center space-x-2 border border-orange-500 text-orange-500 px-6 py-3 rounded-full text-sm font-bold bg-orange-500/10 hover:bg-orange-500 hover:text-white transition-all duration-300">
        <div class="w-2 h-2 bg-orange-500 rounded-full animate-pulse"></div>
        <span>Preguntas Frecuentes</span>
      </button>
    </div>

    <!-- Título principal -->
    <div class="text-center mb-8 sm:mb-12">
      <h2 class="text-white text-3xl sm:text-4xl lg:text-5xl font-bold mb-6 sm:mb-8">
        Resolvemos tus dudas más comunes
      </h2>
      <p class="text-white/80 text-lg sm:text-xl leading-relaxed max-w-4xl mx-auto">
        ¿No encuentras la respuesta que buscas? Contáctanos directamente y te respondemos en menos de 24 horas.
      </p>
    </div>

    <!-- Filtros de categorías -->
    <div class="flex flex-wrap justify-center gap-4 mb-8 sm:mb-12">
      {faqCategories.map((category) => (
        <button 
          class={`px-6 py-3 rounded-full text-sm font-medium transition-all duration-300 ${
            category.active 
              ? 'bg-blue-500 text-white' 
              : 'bg-gray-800 text-gray-300 hover:bg-gray-700 hover:border-orange-400 hover:shadow-lg hover:shadow-orange-400/20 hover:scale-105 border border-gray-700'
          }`}
          onclick={`filterFAQ('${category.id}')`}
        >
          {category.name}
        </button>
      ))}
    </div>

    <!-- Lista de preguntas -->
    <div class="space-y-4 mb-8">
      {faqItems.map((item) => (
        <div 
          class="faq-item bg-gray-800 rounded-xl p-6 group cursor-pointer hover:bg-gray-700 hover:border-orange-400 hover:shadow-lg hover:shadow-orange-400/20 transition-all duration-300 hover:scale-105 border border-gray-700" 
          data-category={item.category}
          onclick={`toggleFAQ(${item.id})`}
        >
          <div class="flex items-center justify-between">
            <h3 class="text-white text-lg font-medium pr-4">{item.question}</h3>
            <svg class="w-6 h-6 text-orange-500 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>
          <div class="faq-answer hidden mt-4">
            <p class="text-white/70 text-sm leading-relaxed">{item.answer}</p>
          </div>
        </div>
      ))}
    </div>

    <!-- Sección de contacto -->
    <div class="text-center">
      <div class="bg-gradient-to-r from-orange-500/10 to-orange-600/10 border border-orange-500/30 rounded-2xl p-8 max-w-3xl mx-auto hover:scale-105 transition-all duration-300 cursor-pointer">
        <h3 class="text-white text-2xl font-bold mb-4">¿No encuentras tu respuesta?</h3>
        <p class="text-white/80 text-lg mb-6">Nuestro equipo de soporte está disponible 24/7 para ayudarte con cualquier duda</p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <button onclick="contactSupport()" class="bg-gradient-to-r from-orange-500 to-orange-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-orange-500/25">
            Contactar Soporte
          </button>
          <button onclick="viewCourses()" class="border border-orange-500 text-orange-500 px-8 py-4 rounded-xl font-bold text-lg hover:bg-orange-500 hover:text-white transition-all duration-300 hover:scale-105">
            Ver Cursos Disponibles
          </button>
        </div>
      </div>
    </div>
    
  </div>
</section>

<script>
  function toggleFAQ(id) {
    const faqItem = document.querySelector(`[onclick="toggleFAQ(${id})"]`);
    const answer = faqItem.querySelector('.faq-answer');
    const arrow = faqItem.querySelector('svg');
    
    if (answer.classList.contains('hidden')) {
      answer.classList.remove('hidden');
      arrow.style.transform = 'rotate(180deg)';
    } else {
      answer.classList.add('hidden');
      arrow.style.transform = 'rotate(0deg)';
    }
  }

  function filterFAQ(category) {
    // Actualizar botones de filtro
    document.querySelectorAll('[onclick^="filterFAQ"]').forEach(btn => {
      btn.classList.remove('bg-blue-500', 'text-white');
      btn.classList.add('bg-gray-800', 'text-gray-300', 'hover:bg-gray-700', 'hover:border-orange-400', 'hover:shadow-lg', 'hover:shadow-orange-400/20', 'hover:scale-105', 'border', 'border-gray-700');
    });
    
    const activeBtn = document.querySelector(`[onclick="filterFAQ('${category}')"]`);
    if (activeBtn) {
      activeBtn.classList.remove('bg-gray-800', 'text-gray-300', 'hover:bg-gray-700', 'hover:border-orange-400', 'hover:shadow-lg', 'hover:shadow-orange-400/20', 'hover:scale-105', 'border', 'border-gray-700');
      activeBtn.classList.add('bg-blue-500', 'text-white');
    }
    
    // Filtrar preguntas por categoría
    const faqItems = document.querySelectorAll('.faq-item');
    faqItems.forEach(item => {
      const element = item as HTMLElement;
      const itemCategory = element.getAttribute('data-category');
      
      if (category === 'all' || itemCategory === category) {
        element.style.display = 'block';
        element.style.opacity = '1';
        element.style.transform = 'scale(1)';
      } else {
        element.style.display = 'none';
        element.style.opacity = '0';
        element.style.transform = 'scale(0.95)';
      }
    });
    
    // Mostrar mensaje si no hay preguntas en la categoría
    const visibleItems = Array.from(faqItems).filter(item => {
      const element = item as HTMLElement;
      return element.style.display !== 'none' && element.getAttribute('data-category') === category;
    });
    
    if (category !== 'all' && visibleItems.length === 0) {
      // Crear mensaje temporal si no hay preguntas
      const container = document.querySelector('.space-y-4') as HTMLElement;
      let noResultsMsg = document.getElementById('no-results-msg') as HTMLElement;
      
      if (!noResultsMsg) {
        noResultsMsg = document.createElement('div');
        noResultsMsg.id = 'no-results-msg';
        noResultsMsg.className = 'text-center py-8';
        noResultsMsg.innerHTML = `
          <div class="text-white/60 text-lg">
            No hay preguntas en esta categoría por el momento.
          </div>
        `;
        container.appendChild(noResultsMsg);
      }
      
      noResultsMsg.style.display = 'block';
    } else {
      const noResultsMsg = document.getElementById('no-results-msg') as HTMLElement;
      if (noResultsMsg) {
        noResultsMsg.style.display = 'none';
      }
    }
  }

  // Funciones para botones de contacto
  function contactSupport() {
    // Navegar a la sección de registro para contacto
    scrollToSection('registro');
    
    // Efecto visual para destacar la sección
    setTimeout(() => {
      const registerSection = document.getElementById('registro');
      if (registerSection) {
        registerSection.style.transform = 'scale(1.02)';
        registerSection.style.boxShadow = '0 0 30px rgba(249, 115, 22, 0.3)';
        registerSection.style.transition = 'all 0.5s ease';
        
        setTimeout(() => {
          registerSection.style.transform = 'scale(1)';
          registerSection.style.boxShadow = '';
        }, 2000);
      }
    }, 500);
  }

  function viewCourses() {
    // Navegar a la sección de cursos
    scrollToSection('cursos');
    
    // Efecto visual para destacar la sección
    setTimeout(() => {
      const coursesSection = document.getElementById('cursos');
      if (coursesSection) {
        coursesSection.style.transform = 'scale(1.02)';
        coursesSection.style.boxShadow = '0 0 30px rgba(249, 115, 22, 0.3)';
        coursesSection.style.transition = 'all 0.5s ease';
        
        setTimeout(() => {
          coursesSection.style.transform = 'scale(1)';
          coursesSection.style.boxShadow = '';
        }, 2000);
      }
    }, 500);
  }

  // Función para scroll a secciones
  function scrollToSection(sectionId) {
    const element = document.getElementById(sectionId);
    if (element) {
      element.scrollIntoView({ 
        behavior: 'smooth', 
        block: 'start' 
      });
    }
  }

  // Hacer funciones globales
  // Declarar funciones globales
  (window as any).toggleFAQ = toggleFAQ;
  (window as any).filterFAQ = filterFAQ;
  (window as any).contactSupport = contactSupport;
  (window as any).viewCourses = viewCourses;
  (window as any).scrollToSection = scrollToSection;
</script>
